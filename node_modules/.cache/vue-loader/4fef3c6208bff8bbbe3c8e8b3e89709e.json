{"remainingRequest":"/Users/pwm/www/ui/ShopOA/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/pwm/www/ui/ShopOA/src/components/HomeShopList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/pwm/www/ui/ShopOA/src/components/HomeShopList.vue","mtime":1561600366121},{"path":"/Users/pwm/www/ui/ShopOA/node_modules/cache-loader/dist/cjs.js","mtime":1561365392055},{"path":"/Users/pwm/www/ui/ShopOA/node_modules/babel-loader/lib/index.js","mtime":1561365391859},{"path":"/Users/pwm/www/ui/ShopOA/node_modules/cache-loader/dist/cjs.js","mtime":1561365392055},{"path":"/Users/pwm/www/ui/ShopOA/node_modules/vue-loader/lib/index.js","mtime":1561365398190}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport api from '../utils/api'\nimport { mapMutations, mapActions, mapState } from 'vuex'\n\nexport default {\n    props:{\n        lists:{\n            type: Array,\n            default: () => {\n                return []\n            }        \n        },\n        titles:{\n            type: Array,\n            default: () => {\n                return ['分类图标/名称', '商品数量', '创建时间', '操作']\n            }\n        }\n    },\n    data(){\n        return{\n            multipleSelection: [],\n            currentPage4: 1,\n            pageSize:10\n           \n        }\n    },\n     computed: {\n        selectIndex () {\n            return this.$store.state.selectIndex\n        },\n        page(){\n            return this.$store.state.page\n        }\n    },\n    methods:{\n        ...mapActions(['getGoodsInfo']),\n      toggleSelection(rows) {\n        if (rows) {\n          rows.forEach(row => {\n            this.$refs.multipleTable.toggleRowSelection(row);\n          });\n        } else {\n          this.$refs.multipleTable.clearSelection();\n        }\n        \n      },\n      handleSelectionChange(val) {\n        this.multipleSelection = val;\n        let arr = []\n        val.map((ele)=>{\n            arr.push(ele.id)\n        })\n        this.$store.state.selectItems = [].concat(arr);\n      },\n       handleSizeChange(val) {\n        console.log(`每页 ${val} 条`);\n        this.pageSize = val\n        this.$store.state.searchForm.pageSize = val\n        this.$store.state.searchForm.page = this.currentPage4\n        this.getShopLists()\n      },\n      handleCurrentChange(val) {\n        console.log(`当前页: ${val}`);\n        this.currentPage4 = val\n        this.$store.state.searchForm.page = val\n        this.$store.state.searchForm.pageSize = this.pageSize\n        this.getShopLists()\n      },\n      onEdit(val){\n          console.log(val);\n          let obj = {}\n          if (val.type === 1) {  //删除\n               obj = {\n                    ids: [val.id],\n                    status: -1\n                }\n          let msg = '删除'\n          this.onConfirm(msg,obj)\n          } else {\n              \n              this.$router.push(`/home/addShop/${val.id}`)\n              this.getGoodsInfo({id:val.id})\n              this.getCategoryList()\n              \n          }\n          \n      },\n      onChangeStatue(e){\n          \n          let obj = {\n              ids: [e.id],\n              status: e.status == 3 ? 2 : 3\n          }\n          let msg = e.status == 3 ? '上架': '下架'\n          this.onConfirm(msg,obj)\n      },\n      onConfirm(msg,obj){\n            this.$confirm(`是否${msg}？`, '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning',\n                center: true\n                }).then(() => {\n                    this.$store.state.betchStatus = obj;\n                    this.$emit('onChangeStatue')\n                }).catch(() => {\n                this.$message({\n                    type: 'info',\n                    message: '已取消'\n                });\n            });\n      },\n       ...mapActions([\n            'getCategoryList', 'getShopLists', 'postBetchStatus', 'postBetchTag'\n        ])\n\n      \n    },\n    created(){\n        this.getShopLists()\n    }\n}\n",{"version":3,"sources":["HomeShopList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA","file":"HomeShopList.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"table-ctn\">\n        <el-table\n            ref=\"multipleTable\"\n            :data=\"lists\"\n            tooltip-effect=\"dark\"\n            style=\"width: 100%\"\n            @selection-change=\"handleSelectionChange\">\n            <el-table-column\n            type=\"selection\"\n            width=\"55\">\n            </el-table-column>\n            <el-table-column\n            label=\"商品信息\"\n            width = '300'\n            >\n            <template slot-scope=\"scope\" class=\"item-one\">\n                <img class=\"header\" src=\"https://img.kemanyun.com/qianhuituan/2019-06-14/2444_1560479214_ZnpgO5sami.png\" alt=\"\">\n                {{ scope.row.title }}\n            </template>\n            </el-table-column>\n            <el-table-column\n            prop=\"price\"\n            label=\"价格信息\"\n            width=\"120\">\n            </el-table-column>\n            <el-table-column\n            prop=\"basic_sale_num\"\n            label=\"销售额\"\n            sortable>\n            </el-table-column>\n            <el-table-column\n            prop=\"xiaol\"\n            label=\"销量\"\n            sortable>\n            </el-table-column>\n            <el-table-column\n            prop=\"pv\"\n            label=\"PV\"\n            sortable>\n            </el-table-column>\n            <el-table-column\n            prop=\"uv\"\n            label=\"UV\"\n            sortable>\n            </el-table-column>\n            <el-table-column\n            label=\"状态\"\n            sortable>\n                <template slot-scope=\"scope\">\n                    <el-button @click=\"onChangeStatue(scope.row)\" type = 'text'>{{ scope.row.status == 2 ? '上架': '下架'}}</el-button>\n                </template>\n            </el-table-column>\n            <el-table-column\n            prop=\"address\"\n            label=\"操作\"\n            width = '140'\n            sortable>\n                <template slot-scope=\"scope\">\n                    <el-button size = mini @click=\"onEdit({id:scope.row.id,type:0})\" type=\"danger\">编辑</el-button>\n                    <el-button v-if=\"selectIndex !=3\" size = mini @click=\"onEdit({id:scope.row.id,type:1})\" type=\"primary\">删除</el-button>\n                </template>\n            </el-table-column>\n        </el-table>\n        <el-pagination\n            class=\"page-box\"\n            @size-change=\"handleSizeChange\"\n            @current-change=\"handleCurrentChange\"\n            :current-page=\"currentPage4\"\n            :page-sizes=\"[10, 20, 30, 40]\"\n            :page-size=\"page.pageSize\"\n            layout=\"total, sizes, prev, pager, next, jumper\"\n            :total=\"page.total\">\n        </el-pagination>\n    </div>\n</template>\n\n<script>\nimport api from '../utils/api'\nimport { mapMutations, mapActions, mapState } from 'vuex'\n\nexport default {\n    props:{\n        lists:{\n            type: Array,\n            default: () => {\n                return []\n            }        \n        },\n        titles:{\n            type: Array,\n            default: () => {\n                return ['分类图标/名称', '商品数量', '创建时间', '操作']\n            }\n        }\n    },\n    data(){\n        return{\n            multipleSelection: [],\n            currentPage4: 1,\n            pageSize:10\n           \n        }\n    },\n     computed: {\n        selectIndex () {\n            return this.$store.state.selectIndex\n        },\n        page(){\n            return this.$store.state.page\n        }\n    },\n    methods:{\n        ...mapActions(['getGoodsInfo']),\n      toggleSelection(rows) {\n        if (rows) {\n          rows.forEach(row => {\n            this.$refs.multipleTable.toggleRowSelection(row);\n          });\n        } else {\n          this.$refs.multipleTable.clearSelection();\n        }\n        \n      },\n      handleSelectionChange(val) {\n        this.multipleSelection = val;\n        let arr = []\n        val.map((ele)=>{\n            arr.push(ele.id)\n        })\n        this.$store.state.selectItems = [].concat(arr);\n      },\n       handleSizeChange(val) {\n        console.log(`每页 ${val} 条`);\n        this.pageSize = val\n        this.$store.state.searchForm.pageSize = val\n        this.$store.state.searchForm.page = this.currentPage4\n        this.getShopLists()\n      },\n      handleCurrentChange(val) {\n        console.log(`当前页: ${val}`);\n        this.currentPage4 = val\n        this.$store.state.searchForm.page = val\n        this.$store.state.searchForm.pageSize = this.pageSize\n        this.getShopLists()\n      },\n      onEdit(val){\n          console.log(val);\n          let obj = {}\n          if (val.type === 1) {  //删除\n               obj = {\n                    ids: [val.id],\n                    status: -1\n                }\n          let msg = '删除'\n          this.onConfirm(msg,obj)\n          } else {\n              \n              this.$router.push(`/home/addShop/${val.id}`)\n              this.getGoodsInfo({id:val.id})\n              this.getCategoryList()\n              \n          }\n          \n      },\n      onChangeStatue(e){\n          \n          let obj = {\n              ids: [e.id],\n              status: e.status == 3 ? 2 : 3\n          }\n          let msg = e.status == 3 ? '上架': '下架'\n          this.onConfirm(msg,obj)\n      },\n      onConfirm(msg,obj){\n            this.$confirm(`是否${msg}？`, '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning',\n                center: true\n                }).then(() => {\n                    this.$store.state.betchStatus = obj;\n                    this.$emit('onChangeStatue')\n                }).catch(() => {\n                this.$message({\n                    type: 'info',\n                    message: '已取消'\n                });\n            });\n      },\n       ...mapActions([\n            'getCategoryList', 'getShopLists', 'postBetchStatus', 'postBetchTag'\n        ])\n\n      \n    },\n    created(){\n        this.getShopLists()\n    }\n}\n</script>\n<style>\n.table-ctn .el-button+.el-button {\n    margin-left: 2px;\n}\n.page-box {\n    min-height: 40px;\n    width: 100%;\n    display: flex;\n    justify-content: flex-end;\n    align-items: flex-end;\n    box-sizing: border-box;\n    padding-right: 10px;\n}\n.header {\n    display: block;\n    width: 80px;\n    height: 80px;\n    overflow: hidden;\n    border: 1px solid #f1f1f1;\n}\n.table-ctn .el-table .cell {\n    display: flex;\n    align-items: center;\n}\n</style>\n\n"]}]}