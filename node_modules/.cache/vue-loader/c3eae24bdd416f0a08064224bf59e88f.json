{"remainingRequest":"/Users/edz/Desktop/homeX/ShopOA/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/edz/Desktop/homeX/ShopOA/src/components/GuiGeShuXing.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/edz/Desktop/homeX/ShopOA/src/components/GuiGeShuXing.vue","mtime":1561552057719},{"path":"/Users/edz/Desktop/homeX/ShopOA/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/edz/Desktop/homeX/ShopOA/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/edz/Desktop/homeX/ShopOA/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/edz/Desktop/homeX/ShopOA/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapMutations, mapActions, mapState } from 'vuex'\nexport default {\n    props:{\n        form:{\n            type:Object,\n            default:()=>{\n                return {\n\n                }\n            }\n        },\n        newForm:{\n            type: Object,\n            default:() => {\n                return{\n\n                }\n            }\n        },\n        dialogFormVisible:{\n            type:Boolean,\n            default:()=>{\n                return false\n            }\n        }\n    },\n    data(){\n        return{\n            gzName:'规格名称',\n            addSX:'',\n            isShowAddImg: true,\n            myRules:[],\n            dynamicTags: [],\n            inputVisible: false,\n            inputValue: '',\n\n        }\n    },\n    computed:{\n        isBl(){\n            return this.$store.state.addShopForm1.commission_type\n        }\n    },\n    methods:{\n       ...mapActions([\n            'getCategoryList', 'getShopLists', 'postBetchStatus', 'postBetchTag', 'postGoodsEdit'\n        ]),\n        addGG(){\n            console.log(33);\n            this.isShowAddImg = !this.isShowAddImg\n        },\n        closeBtn(){\n             this.isShowAddImg = !this.isShowAddImg\n             this.dynamicTags = []\n        },\n        onAddGGe(){\n\n            this.myRules.push({name:this.addSX})\n        },\n         handleClose(tag) {\n             \n        this.dynamicTags.splice(this.dynamicTags.indexOf(tag), 1);\n      },\n       tabClick(e){\n            if (e === 0) {\n                this.$router.push('/shopList')\n            } \n            else if(e === 1) {\n                this.$emit('changeTab',1)\n            }\n            else if(e === 2) {\n                this.$emit('changeTab',3)\n            }else {\n                this.$store.state.GoodSkuList = [].concat(this.dynamicTags)\n                let arr = []\n                this.dynamicTags.map((ele)=>{\n                    arr.push(ele.name)\n                })\n                this.$store.state.addShopForm1.SkuDetail = [].concat(arr) \n                 this.$emit('changeTab',3)\n                \n            }\n        },\n        callBack(e){\n\n            if (e === 200) {\n                this.$message({\n                    type: 'success',\n                    message: `保存成功！`\n                });\n            } else {\n                this.$message({\n                    type: 'error',\n                    message: `保存失败！`\n                });\n            }\n        },\n\n      showInput() {\n        this.inputVisible = true;\n        this.$nextTick(_ => {\n          this.$refs.saveTagInput.$refs.input.focus();\n        });\n      },\n\n      handleInputConfirm() {\n        let inputValue = this.inputValue;\n        if (inputValue) {\n            let obj = Object.assign({},this.$store.state.addShopForm1)\n\n            if (obj.commission_type) {\n                obj.commission_ratio = 0\n                obj.second_commission_ratio = 0\n            } else {\n                obj.commission = 0\n                obj.second_commission = 0\n            }\n            obj.name = inputValue\n            \n            this.dynamicTags.push(obj);\n             \n        }\n        this.inputVisible = false;\n        this.inputValue = '';\n      }\n      \n      \n    },\n    created(){\n        \n    }\n}\n",{"version":3,"sources":["GuiGeShuXing.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA","file":"GuiGeShuXing.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"gg-form-ctn\">\n        <el-form ref=\"form\" :model=\"form\" label-width=\"120px\">\n            <el-form-item label=\"商品规格\">\n              <div class=\"add-shop-g\">\n                  <p v-if=\"isShowAddImg\" class=\"sku-add\" @click=\"addGG\">+</p>\n                  <div v-else>\n                      <div class=\"add-gg-top-wrap\">\n                          <el-input\n                            style=\"width:15%;\"\n                            v-model=\"gzName\"\n                            clearable>\n                        </el-input>\n                        <el-button type=\"text\" icon=\"el-icon-delete\" @click=\"closeBtn\">关闭</el-button>\n                      </div>\n                      <div class=\"add-gg-bottom-wrap\">\n                          <el-tag\n                            :key=\"index\"\n                            v-for=\"(tag,index) in dynamicTags\"\n                            closable\n                            :disable-transitions=\"false\"\n                            @close=\"handleClose(tag)\">\n                            {{tag.name}}\n                            </el-tag>\n                            <el-input\n                            style=\"width:10%;\"\n                            class=\"input-new-tag\"\n                            v-if=\"inputVisible\"\n                            v-model=\"inputValue\"\n                            ref=\"saveTagInput\"\n                            size=\"small\"\n                            @keyup.enter.native=\"handleInputConfirm\"\n                            @blur=\"handleInputConfirm\"\n                            >\n                            </el-input>\n                            <el-button v-else class=\"button-new-tag\" size=\"small\" @click=\"showInput\">添加</el-button>\n                      </div>\n                  </div>\n              </div>\n              <p class=\"tipT\">\n                  *商品规格请填写中文，字母或者数字，请不要填写带有空格、特殊字符或者分号、引号的规格； sku价格需大于0；\n              </p>\n\n            </el-form-item>\n            <el-form-item label = 'sku价格'>\n                <el-table\n                    empty-text = '⚠️ 请添加规格'\n                    :data=\"dynamicTags\"\n                    style=\"width: 100%\">\n                    <el-table-column\n                        prop=\"name\"\n                        :label=\"gzName\"\n                        width=\"180\">\n                    </el-table-column>\n                    <el-table-column\n                        label=\"成本价（元）\"\n                        width=\"180\">\n                        <template slot-scope=\"scope\">\n                            <el-input v-model=\"scope.row.cost_price\"   style=\"width:40%\"></el-input>\n                        </template>\n                    </el-table-column>\n                    <el-table-column\n                        label=\"市场价（元）\">\n                        <template slot-scope=\"scope\">\n                            <el-input v-model=\"scope.row.market_price\"   style=\"width:80%\"></el-input>\n                        </template>\n                    </el-table-column>\n                    <el-table-column\n                        label=\"团购价（元）\">\n                        <template slot-scope=\"scope\">\n                            <el-input v-model=\"scope.row.price\"   style=\"width:80%\"></el-input>\n                        </template>\n                    </el-table-column>\n                    <el-table-column\n                        label=\"团长佣金\">\n                        <template slot-scope=\"scope\" >\n                            <div v-show=\"isBl\">\n                                一级: <el-input v-model=\"scope.row.commission\"   style=\"width:80%\"></el-input>元\n                                二级: <el-input v-model=\"scope.row.second_commission\"   style=\"width:80%\"></el-input>元\n                            </div>\n                            <div v-show=\"!isBl\">\n                                一级: <el-input v-model=\"scope.row.commission_ratio\"   style=\"width:80%\"></el-input>%\n                                二级: <el-input v-model=\"scope.row.second_commission_ratio\"   style=\"width:80%\"></el-input>%\n                            </div>\n                        </template>\n                    </el-table-column>\n                     <el-table-column\n                        label=\"推客佣金\">\n                        <template slot-scope=\"scope\">\n                            <el-input v-model=\"scope.row.price\"   style=\"width:80%\"></el-input>\n                        </template>\n                    </el-table-column>\n                    <el-table-column\n                        label=\"库存\">\n                        <template slot-scope=\"scope\">\n                            <el-input v-model=\"scope.row.price\"   style=\"width:80%\"></el-input>\n                        </template>\n                    </el-table-column>\n                </el-table>\n            </el-form-item>\n           \n        </el-form>\n\n        <div class=\"bottom-wrap\">\n            <el-button @click=\"tabClick(0)\"  size = 'mini'>取消</el-button>\n            <el-button @click=\"tabClick(1)\" size = 'mini' type=\"primary\">上一步</el-button>\n            <!-- <el-button @click=\"tabClick(2)\" size = 'mini' type=\"primary\">下一步</el-button> -->\n            <el-button @click=\"tabClick(3)\" size = 'mini' type=\"primary\">保存</el-button>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { mapMutations, mapActions, mapState } from 'vuex'\nexport default {\n    props:{\n        form:{\n            type:Object,\n            default:()=>{\n                return {\n\n                }\n            }\n        },\n        newForm:{\n            type: Object,\n            default:() => {\n                return{\n\n                }\n            }\n        },\n        dialogFormVisible:{\n            type:Boolean,\n            default:()=>{\n                return false\n            }\n        }\n    },\n    data(){\n        return{\n            gzName:'规格名称',\n            addSX:'',\n            isShowAddImg: true,\n            myRules:[],\n            dynamicTags: [],\n            inputVisible: false,\n            inputValue: '',\n\n        }\n    },\n    computed:{\n        isBl(){\n            return this.$store.state.addShopForm1.commission_type\n        }\n    },\n    methods:{\n       ...mapActions([\n            'getCategoryList', 'getShopLists', 'postBetchStatus', 'postBetchTag', 'postGoodsEdit'\n        ]),\n        addGG(){\n            console.log(33);\n            this.isShowAddImg = !this.isShowAddImg\n        },\n        closeBtn(){\n             this.isShowAddImg = !this.isShowAddImg\n             this.dynamicTags = []\n        },\n        onAddGGe(){\n\n            this.myRules.push({name:this.addSX})\n        },\n         handleClose(tag) {\n             \n        this.dynamicTags.splice(this.dynamicTags.indexOf(tag), 1);\n      },\n       tabClick(e){\n            if (e === 0) {\n                this.$router.push('/shopList')\n            } \n            else if(e === 1) {\n                this.$emit('changeTab',1)\n            }\n            else if(e === 2) {\n                this.$emit('changeTab',3)\n            }else {\n                this.$store.state.GoodSkuList = [].concat(this.dynamicTags)\n                let arr = []\n                this.dynamicTags.map((ele)=>{\n                    arr.push(ele.name)\n                })\n                this.$store.state.addShopForm1.SkuDetail = [].concat(arr) \n                 this.$emit('changeTab',3)\n                \n            }\n        },\n        callBack(e){\n\n            if (e === 200) {\n                this.$message({\n                    type: 'success',\n                    message: `保存成功！`\n                });\n            } else {\n                this.$message({\n                    type: 'error',\n                    message: `保存失败！`\n                });\n            }\n        },\n\n      showInput() {\n        this.inputVisible = true;\n        this.$nextTick(_ => {\n          this.$refs.saveTagInput.$refs.input.focus();\n        });\n      },\n\n      handleInputConfirm() {\n        let inputValue = this.inputValue;\n        if (inputValue) {\n            let obj = Object.assign({},this.$store.state.addShopForm1)\n\n            if (obj.commission_type) {\n                obj.commission_ratio = 0\n                obj.second_commission_ratio = 0\n            } else {\n                obj.commission = 0\n                obj.second_commission = 0\n            }\n            obj.name = inputValue\n            \n            this.dynamicTags.push(obj);\n             \n        }\n        this.inputVisible = false;\n        this.inputValue = '';\n      }\n      \n      \n    },\n    created(){\n        \n    }\n}\n</script>\n<style>\n.mt-form-ctn {\n    flex: 1;\n    padding-top: 20px;\n    background-color: #fff;\n}\n.ys-tip-text {\n    font-size: 12px;\n    color: #999;\n    margin-left: 50px;\n}\n.bottom-wrap {\n    margin-top: 40px;\n    height: 30px;\n}\n.add-shop-g {\n    padding: 10px;\n    min-height: 70px;\n    border: 1px solid #ddd;\n}\n.sku-add {\n    display: block;\n    line-height: 40px;\n    background: #fff;\n    border: 1px dashed #999;\n    color: #999;\n    font: 700 46px/40px arial;\n    text-align: center;\n}\n.tipT{\n    font-size: 12px;\n    color: #999;\n}\n.add-gg-top-wrap {\n    height: 40px;\n    background-color: #eee;\n    padding: 5px 15px;\n    display: flex;\n    justify-content: space-between;\n}\n.add-gg-bottom-wrap {\n    padding: 5px 15px;\n    min-height: 30px;\n}\n.m-table {\n    border: 1px solid #eee;\n}\n.gg-form-ctn .el-table--fit {\n    width: 100%;\n    border: 1px solid #eee;\n    border-bottom: none;\n}\n.gg-form-ctn  .el-tag {\n margin-right: 6px;\n}\n</style>\n\n"]}]}